function httpGet(e){var a=null;return a=new XMLHttpRequest,a.open("GET",e,!1),a.send(null),a.responseText}function drawTriangle(e,a,o,s,t,i,r){e.activate();var n=new paper.Path;n.fillColor=""===coresSecundarias?coresPrimarias[o%2]:coresSecundarias,n.fillColor.alpha=s;for(var l in a)n.add(new paper.Point(t+r/2*Math.sin(a[l]*Math.PI/3),i+r/2*Math.cos(a[l]*Math.PI/3)));return n.closed=!0,n.fullySelected=!1,e.view.draw(),n}function downloadDataUri(e){e.url||(e.url="http://download-data-uri.appspot.com/"),$('<form method="post" action="'+e.url+'" style="display:none"><input type="hidden" name="filename" value="'+e.filename+'"/><input type="hidden" name="data" value="'+e.data+'"/></form>').appendTo("body").submit().remove()}var MAX_LAYER=10,MIN_LAYER=4,MIN_ALPHA=.4,MAX_ALPHA=.75,FADE_TIME=500,firstMillis=0,lastTime=0,coresPrimarias=["#2DBCB5","#CE2A1E"],coresSecundarias="",STATE={RAND:0,GRAD:2,CICLE:3,FADEIN:4,FADEOUT:5},fileNames=["fs","fs-security","fs-learning","fs-insurance","fs-entertainment","fs-company","fs-assistance"],symDist={V:[.08360081601,1.1568374446],H:[1.0296105255,.2467870257]},symWidths={V:{fs:.7245479534,"fs-company":1.6268051711},H:{fs:.791,"fs-security":1.788,"fs-learning":1.8146,"fs-insurance":2.0468,"fs-entertainment":2.9068,"fs-company":1.7802,"fs-assistance":2.2016}},sState=STATE.RAND,tool;window.onload=function(){function e(e,a,o,s){""!==o&&e.project.importSVG("includes/images/"+o+".svg",{expandShapes:!1,onLoad:function(t){var i=t.bounds.width;t.bounds.width=symWidths[s][o]*a,i=t.bounds.width/i,t.bounds.height=t.bounds.height*i,t.bounds.x=a*symDist[s][0],t.bounds.y=a*symDist[s][1],""!==coresSecundarias&&(t.fillColor=coresSecundarias),e.view.viewSize=[e.view.bounds.width+t.bounds.width+t.bounds.x,e.view.bounds.height+t.bounds.height+t.bounds.y],e.view.update()}})}var a=getUrlVars(),o=70,s="",t="H",i="color",r=!1;void 0!==a.width&&(o=a.width),void 0!==a.type&&-1!==fileNames.indexOf(a.type)&&(s=a.type),void 0===a.pos||"V"!==a.pos&&"H"!==a.pos||(t=a.pos),void 0===a.color||"vermelho"!==a.color&&"branco"!==a.color&&"preto"!==a.color||(i=a.color),void 0===a.download||"true"!==a.download&&"false"!==a.download||(r=a.download);var n=httpGet("http://www.fscompany.com.br/logo.php"),l=MIN_LAYER+(MAX_LAYER-MIN_LAYER)*n/100,d=MIN_ALPHA+(MAX_ALPHA-MIN_ALPHA)*n/100;switch(console.log(l,d),i){case"branco":$("body").css("background","#999999"),coresSecundarias="#FFFFFF";break;case"vermelho":coresSecundarias="#cd171e";break;case"preto":coresSecundarias="#000000";break;case"color":coresSecundarias=""}var c,p=[];firstMillis=(new Date).getTime();var u=document.getElementById("logoCanvas0"),h=new paper.PaperScope;h.setup(u),h.view.viewSize=[o*Math.sqrt(3)/2,o],e(h,o,s,t),c=shuffle(k_combinations([0,1,2,3,4,5],3));var f,m,A,v,w,T;h.view.onFrame=function(){switch(sState){case STATE.RAND:h.project.activeLayer.removeChildren(),p=[],v=range(l);for(var e=0;l>e;e++)p.push(drawTriangle(h,c[e],e,d,.5*Math.sqrt(3)*o/2,o/2,o));sState=STATE.CICLE,m=0,A=0;break;case STATE.CICLE:m=(m+1)%p.length,A=(A+1)%c.length,p.push(drawTriangle(h,c[A],A,d,.5*Math.sqrt(3)*o/2,o/2,o)),lastTime=millis(),sState=STATE.FADEOUT,T=p[m].fillColor.alpha,w=p[p.length-1].fillColor.alpha,p[p.length-1].fillColor.alpha=0,r&&(r=!1,downloadAsSVG());break;case STATE.FADEOUT:f=millis()-lastTime;var a=T*(1-f/FADE_TIME);a=a>0?a:0,a=1>a?a:1,p[m].fillColor.alpha=a,f>=FADE_TIME&&(p[m].remove(),p.splice(m,1),sState=STATE.FADEIN,lastTime=millis());break;case STATE.FADEIN:f=millis()-lastTime;var a=w*(f/FADE_TIME);a=a>0?a:0,a=1>a?a:1,p[p.length-1].fillColor.alpha=a,f>=FADE_TIME&&(sState=STATE.CICLE,lastTime=millis())}}};var downloadAsSVG=function(e){if(!e){var a=new Date;e="fslogo-"+a.getHours()+a.getMinutes()+a.getSeconds()+".svg"}var o="data:image/svg+xml;base64,"+btoa(paper.project.exportSVG({asString:!0}));downloadDataUri({data:o,filename:e})};